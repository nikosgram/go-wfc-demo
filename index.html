<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
          name="viewport">
    <meta content="ie=edge" http-equiv="X-UA-Compatible">
    <title>Document</title>
    <style>
        html {
            font-family: sans-serif;
            -ms-text-size-adjust: 100%;
            -webkit-text-size-adjust: 100%;
        }

        body {
            margin: 0;
            overflow: hidden;
        }

        section {
            display: block;
        }

        img {
            border: 0;
        }
    </style>
</head>
<body>
</body>
<script>
    (() => {
        fetch('./output.json').then(response => {
            response.json().then(output => {
                const indexedStructs = output[`indexed_structs`];
                const returnedMatrix = output[`output_matrix`];

                let innerHtml = "";

                for (let z = 0; z < returnedMatrix.length; z++) {
                    for (let y = 0; y < returnedMatrix[z].length; y++) {
                        innerHtml += `<section style="height: 16px">`

                        for (let x = 0, id, rotate; x < returnedMatrix[z][y].length; x++) {
                            id = returnedMatrix[z][y][x]
                            rotate = indexedStructs[id][`rotation`] * 90
                            innerHtml += `<div style="display: inline-block; transform: rotate(` + rotate + `deg); width: 16px; height: 16px; background-image: url('assets/` + indexedStructs[id][`texture`] + `')"></div>`
                        }

                        innerHtml += `</section>`
                    }
                }

                document.body.innerHTML += innerHtml
            })
        })
    })();
</script>
</html>
